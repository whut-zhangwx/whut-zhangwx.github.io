<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>VSCode&amp;Docker | æ–‡ç¾Šç¾½</title><meta name="author" content="æ–‡ç¾Šç¾½"><meta name="copyright" content="æ–‡ç¾Šç¾½"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å…³äºå¦‚ä½•è®©ä¿éšœæœºè¿å…¬å¸å¤–ç½‘ä¸‹è½½ VsCode æ’ä»¶çš„æ“ä½œ ç›®å‰æˆ‘ä»¬æœ‰ä¸€å°å…¬ç”¨çš„å¯ä»¥è¿å…¬å¸å¤–ç½‘çš„æœåŠ¡å™¨, IPåœ°å€æ˜¯ 172.xx.x.xx, æˆ‘åœ¨ä¸Šé¢æŒ‚è½½äº†ä¸€ä¸ª Squid ä»£ç†, ç«¯å£å·ä¸º 10022. ç°åœ¨å¤§å®¶åªéœ€è¦åœ¨è‡ªå·±çš„ä¿éšœæœº (ä¸èƒ½è¿å¤–ç½‘) ä¸Šé…ç½®ä»£ç†åœ°å€ä¸º http:&#x2F;&#x2F;172.xx.x.xx:10022 å³å¯é€šè¿‡ä»£ç†è®¿é—®å¤–ç½‘, å…·ä½“æ“ä½œå¦‚ä¸‹ 123456789101112# 1. è¿">
<meta property="og:type" content="article">
<meta property="og:title" content="VSCode&amp;Docker">
<meta property="og:url" content="https://whut-zhangwx.github.io/how-to-configure-remote-development-environment-on-vscode/index.html">
<meta property="og:site_name" content="æ–‡ç¾Šç¾½">
<meta property="og:description" content="å…³äºå¦‚ä½•è®©ä¿éšœæœºè¿å…¬å¸å¤–ç½‘ä¸‹è½½ VsCode æ’ä»¶çš„æ“ä½œ ç›®å‰æˆ‘ä»¬æœ‰ä¸€å°å…¬ç”¨çš„å¯ä»¥è¿å…¬å¸å¤–ç½‘çš„æœåŠ¡å™¨, IPåœ°å€æ˜¯ 172.xx.x.xx, æˆ‘åœ¨ä¸Šé¢æŒ‚è½½äº†ä¸€ä¸ª Squid ä»£ç†, ç«¯å£å·ä¸º 10022. ç°åœ¨å¤§å®¶åªéœ€è¦åœ¨è‡ªå·±çš„ä¿éšœæœº (ä¸èƒ½è¿å¤–ç½‘) ä¸Šé…ç½®ä»£ç†åœ°å€ä¸º http:&#x2F;&#x2F;172.xx.x.xx:10022 å³å¯é€šè¿‡ä»£ç†è®¿é—®å¤–ç½‘, å…·ä½“æ“ä½œå¦‚ä¸‹ 123456789101112# 1. è¿">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://whut-zhangwx.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2024-06-30T16:00:00.000Z">
<meta property="article:modified_time" content="2024-07-22T06:41:31.447Z">
<meta property="article:author" content="æ–‡ç¾Šç¾½">
<meta property="article:tag" content="è®¡ç®—æœº">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="VSCode">
<meta property="article:tag" content="Remote-SSH">
<meta property="article:tag" content="Dev Containers">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://whut-zhangwx.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/avatar.jpg"><link rel="canonical" href="https://whut-zhangwx.github.io/how-to-configure-remote-development-environment-on-vscode/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'VSCode&Docker',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-22 14:41:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">102</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">127</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">38</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">æ–‡ç¾Šç¾½</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">VSCode&amp;Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-06-30T16:00:00.000Z" title="å‘è¡¨äº 2024-07-01 00:00:00">2024-07-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-07-22T06:41:31.447Z" title="æ›´æ–°äº 2024-07-22 14:41:31">2024-07-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">è®¡ç®—æœº</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>11åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="VSCode&amp;Docker"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h2 id="å…³äºå¦‚ä½•è®©ä¿éšœæœºè¿å…¬å¸å¤–ç½‘ä¸‹è½½-vscode-æ’ä»¶çš„æ“ä½œ">å…³äºå¦‚ä½•è®©ä¿éšœæœºè¿å…¬å¸å¤–ç½‘ä¸‹è½½ VsCode æ’ä»¶çš„æ“ä½œ</h2>
<p>ç›®å‰æˆ‘ä»¬æœ‰ä¸€å°å…¬ç”¨çš„å¯ä»¥è¿å…¬å¸å¤–ç½‘çš„æœåŠ¡å™¨, IPåœ°å€æ˜¯ 172.xx.x.xx, æˆ‘åœ¨ä¸Šé¢æŒ‚è½½äº†ä¸€ä¸ª Squid ä»£ç†, ç«¯å£å·ä¸º 10022. ç°åœ¨å¤§å®¶åªéœ€è¦åœ¨è‡ªå·±çš„ä¿éšœæœº (ä¸èƒ½è¿å¤–ç½‘) ä¸Šé…ç½®ä»£ç†åœ°å€ä¸º <code>http://172.xx.x.xx:10022</code> å³å¯é€šè¿‡ä»£ç†è®¿é—®å¤–ç½‘, å…·ä½“æ“ä½œå¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. è¿æ¥ä¿éšœæœº</span></span><br><span class="line">ssh yourserver</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. åœ¨ /etc/profile.d/proxy.sh ä¸­æ·»åŠ é…ç½®</span></span><br><span class="line">vim /etc/profile.d/proxy.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ å¦‚ä¸‹å†…å®¹, :wq</span></span><br><span class="line">export http_proxy=http://172.xx.x.xx:10022</span><br><span class="line">export https_proxy=http://172.xx.x.xx:10022</span><br><span class="line">export no_proxy=&quot;localhost&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. <span class="built_in">source</span>æ‰§è¡Œprofile</span></span><br><span class="line">source /etc/profile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4. æµ‹è¯•</span></span><br><span class="line">wget baidu.com</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå¯ä»¥æ­£å¸¸é€šè¿‡ VsCode çš„ Remote-SSH æ¥è¿æ¥ä¿éšœæœº, ä¼šé€šè¿‡ç½‘ç»œè‡ªåŠ¨ä¸‹è½½/æ›´æ–°/åŒæ­¥æ’ä»¶</p>
<h2 id="å¦‚ä½•åœ¨ä¿éšœæœºä¸Šç¦»çº¿å®‰è£…vscodeæ’ä»¶">å¦‚ä½•åœ¨ä¿éšœæœºä¸Šç¦»çº¿å®‰è£…VSCodeæ’ä»¶</h2>
<p>å¤‡æ³¨ï¼šç›®å‰ä¿éšœæœºè™½ç„¶å·²ç»è¿ç½‘, ä½†æ˜¯è¿˜æ˜¯ä¸èƒ½é€šè¿‡ç½‘ç»œè‡ªåŠ¨ä¸‹è½½/æ›´æ–°VSCodeæ’ä»¶. åŒ…æ‹¬å…¬ç”¨æœºå™¨ä¹Ÿä¸èƒ½é€šè¿‡ <code>Install in SSH</code> ä¸‹è½½VSCodeæ’ä»¶, åœ¨å…¬ç”¨æœºå™¨ä¸Šä¸‹è½½æ’ä»¶ä¼šæŠ¥é”™ <code>æ— æ³•è§£æä¸å­˜åœ¨çš„æ–‡ä»¶</code>, å½“å‰è¿™ä¸ªé—®é¢˜è¿˜æ²¡æœ‰è§£å†³.<br>
<img src="https://xiaophai-typora.oss-cn-shanghai.aliyuncs.com/%E6%97%A0%E6%B3%95%E8%A7%A3%E6%9E%90%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%96%87%E4%BB%B6.png" alt="æ— æ³•è§£æä¸å­˜åœ¨çš„æ–‡ä»¶"></p>
<p>ç°åœ¨å¯è¡Œçš„æ›¿ä»£æ–¹æ¡ˆæ˜¯åœ¨ <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/vscode">Extensions for Visual Studio Code</a> ä¸­ä¸‹è½½æ’ä»¶çš„ VSIX æ–‡ä»¶, ç„¶åå°†æ’ä»¶ä¸Šä¼ åˆ°ä¿éšœæœºä¸­, å†åœ¨VSCodeä¸­é€šè¿‡ <code>Extensions</code>&gt;<code>...</code>&gt;<code>Install from VSIX...</code> ç¦»çº¿å®‰è£…æ’ä»¶.</p>
<h2 id="å¦‚ä½•ç¦»çº¿å®‰è£…-vscode-server">å¦‚ä½•ç¦»çº¿å®‰è£… vscode-server</h2>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43623902/article/details/136258880">vscode è¿œç¨‹ linux(åŒ…æ‹¬ç¦»çº¿vscode-serverå®‰è£…ï¼Œå…å¯†ç™»å½•æ–¹æ³•)</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">commit_id=xxx</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">x86:</span></span><br><span class="line">curl -sSL &quot;https://vscode.download.prss.microsoft.com/dbazure/download/stable/$&#123;commit_id&#125;/vscode-server-linux-x64.tar.gz&quot; -o vscode-server-linux-x64.tar.gz</span><br><span class="line">curl -sSL &quot;https://vscode.download.prss.microsoft.com/dbazure/download/stable/$&#123;commit_id&#125;/vscode_cli_alpine_x64_cli.tar.gz&quot; -o vscode_cli_alpine_x64_cli.tar.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">arm:</span></span><br><span class="line">curl -sSL &quot;https://vscode.download.prss.microsoft.com/dbazure/download/stable/$&#123;commit_id&#125;/vscode-server-linux-arm64.tar.gz&quot; -o vscode-server-linux-x64.tar.gz</span><br><span class="line">curl -sSL &quot;https://vscode.download.prss.microsoft.com/dbazure/download/stable/$&#123;commit_id&#125;/vscode_cli_alpine_arm64_cli.tar.gz&quot; -o vscode_cli_alpine_x64_cli.tar.gz</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ğŸ“¦~/.vscode-server</span><br><span class="line"> â”£â” ğŸ“cli</span><br><span class="line"> â”ƒ   â”—â” ğŸ“servers</span><br><span class="line"> â”ƒ   â”ƒ   â”—â” ğŸ“Stable-$&#123;commit_id&#125;</span><br><span class="line"> â”ƒ   â”ƒ       â”—â” ğŸ“server # &lt;-rename- vscode-server-linux-x64 &lt;-untar- vscode-server-linux-x64.tar.gz</span><br><span class="line"> â”ƒ   â”—â” ğŸ“œiru.json</span><br><span class="line"> â”£â” ğŸ“œcode-$&#123;commit_id&#125;  # &lt;-rename- code &lt;-untar- vscode_cli_alpine_x64_cli.tar.gz</span><br><span class="line"> â”£â” ğŸ“data</span><br><span class="line"> â”—â” ğŸ“extensions</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> ~/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> â”£â” .vscode-server</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> â”£â” vscode-server-linux-x64.tar.gz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> â”£â” vscode_cli_alpine_x64_cli.tar.gz</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> â”—â” configvscode.sh</span></span><br><span class="line">cd ~</span><br><span class="line">bash configvscode.sh</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">~/configvscode.sh</span></span><br><span class="line">set -e</span><br><span class="line">commit_id=xxx</span><br><span class="line">mkdir -p ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">untar</span></span><br><span class="line">tar -xzf vscode-server-linux-x64.tar.gz -C ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/</span><br><span class="line">tar -xzf vscode_cli_alpine_x64_cli.tar.gz -C ~/.vscode-server/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">rename</span></span><br><span class="line">mv ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/vscode-server-linux-x64 \</span><br><span class="line">   ~/.vscode-server/cli/servers/Stable-$&#123;commit_id&#125;/server</span><br><span class="line">mv ~/.vscode-server/code \</span><br><span class="line">   ~/.vscode-server/code-$&#123;commit_id&#125;</span><br></pre></td></tr></table></figure>
<h2 id="dockerçš„ç®€å•ä½¿ç”¨">Dockerçš„ç®€å•ä½¿ç”¨</h2>
<h3 id="é…ç½®dockerç¯å¢ƒ">é…ç½®Dockerç¯å¢ƒ</h3>
<p>é¦–å…ˆéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®Dockerç¯å¢ƒ. æˆ‘ä»¬ç”³è¯·çš„ä¿éšœæœºåœ¨æ‹¿åˆ°æ‰‹ååº”è¯¥éƒ½å·²ç»é…ç½®å¥½Dockerç¯å¢ƒäº†, å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­è¾“å…¥ <code>docker --version</code> å‘½ä»¤æ¥æ£€æŸ¥, å¦‚æœæ²¡æœ‰é…ç½®Dockerç¯å¢ƒå°±é¢å¤–å†é…ç½®ä¸€ä¸‹.</p>
<p>å¤‡æ³¨: æˆ‘ä»¬ä¿éšœæœºçš„ç³»ç»Ÿæ˜¯ Ubuntu 20.04.6 LTS, å¯ä»¥åœ¨ç»ˆç«¯ä¸­é€šè¿‡ <code>cat /etc/os-release</code> æ¥è¾“å‡º. Ubuntuå’ŒCentosç³»ç»ŸDockerçš„å®‰è£…å¯ä»¥å‚è€ƒè¿™ä¸¤ç¯‡åšå®¢</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/ubuntu-docker-install.html">Ubuntu Docker å®‰è£… | èœé¸Ÿæ•™ç¨‹</a>.</li>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/centos-docker-install.html">CentOS Docker å®‰è£… | èœé¸Ÿæ•™ç¨‹</a></li>
</ul>
<h3 id="ä»è¿œç«¯æ‹‰å–dockeré•œåƒ">ä»è¿œç«¯æ‹‰å–Dockeré•œåƒ</h3>
<p><strong>å…³äºDockeré•œåƒæº</strong><br>
æ­£å¸¸æ¥è¯´æˆ‘ä»¬çš„ä¿éšœæœºæ˜¯ä¸èƒ½è¿æ¥å…¬å¸å¤–ç½‘çš„, å³æˆ‘ä»¬ä¸èƒ½è®¿é—®ä¸€äº›å…¬å¼€çš„Dockeré•œåƒæº (é€šè¿‡ä»£ç†è®¿é—®æ˜¯åè¯). å…¬å¸ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªå…¬å¸å†…ç½‘å¯ä»¥è®¿é—®çš„dockeré•œåƒæº <a target="_blank" rel="noopener" href="https://harbor.4pd.io">harbor.4pd.io</a>, é€šè¿‡å…±äº«è´¦å·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test          # username</span><br><span class="line">Harbor@test01 # password</span><br></pre></td></tr></table></figure>
<p>ç™»å½•. æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­æœç´¢/æŸ¥çœ‹/ä¸‹è½½å·²ç»æäº¤è¿‡çš„Dockeré•œåƒ, ä¾‹å¦‚å½“å‰ (2024-7-1) <a target="_blank" rel="noopener" href="http://contest.4pd.io/competition_detail?name=basemodel_greek_ability&amp;version=3">åŸºç¡€æ¨¡å‹ å¸Œè…Šè¯­èƒ½åŠ›æ¦œ v3</a> çš„æ¦œé¦–, ç”± guohongjie æ‰€æäº¤çš„é•œåƒå°±ä¿å­˜åœ¨ <a target="_blank" rel="noopener" href="https://harbor.4pd.io/harbor/projects/12/repositories/pk_platform%2Fmodel_services%2Fguohongjie_basemodel_russian_ability/artifacts-tab">guohongjie_basemodel_russian_ability</a> ä¸­. å¤§å®¶å¯ä»¥åœ¨è‡ªå·±æ‰€å…³æ³¨çš„æ¦œå•å’Œæ¨¡å‹ä¸­æŸ¥æ‰¾åˆ°å¯¹åº”çš„é•œåƒæ–‡ä»¶.</p>
<p><strong>ä¸‹è½½Dockeré•œåƒ</strong><br>
é¦–å…ˆéœ€è¦åœ¨ä¿éšœæœºçš„ç»ˆç«¯ä¸­é€šè¿‡å‘½ä»¤ç™»å½•harboré•œåƒæºçš„å…¬ç”¨è´¦å·.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login harbor.4pd.io -u test -p Harbor@test01</span><br></pre></td></tr></table></figure>
<p>ä¹‹åä½¿ç”¨ <code>docker pull</code> å‘½ä»¤æ‹‰å–å¯¹åº”çš„é•œåƒæº, ä¾‹å¦‚æ‹‰å–å½“å‰å¸Œè…Šè¯­èƒ½åŠ›æ¦œæ¦œé¦–çš„é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull harbor.4pd.io/lab-platform/pk_platform/model_services/guohongjie_basemodel_russian_ability:0.0.4</span><br></pre></td></tr></table></figure>
<p>é•œåƒçš„åç§°å¯ä»¥åœ¨æ¦œå•æºç çš„è¯¦ç»†ä¿¡æ¯ä¸­æŸ¥æ‰¾åˆ°. ä¸‹è½½å®Œæˆåå¯ä»¥é€šè¿‡å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images # åˆ—å‡ºæœ¬æœºä¸Šçš„æ‰€æœ‰é•œåƒ</span><br></pre></td></tr></table></figure>
<p>æ¥æŸ¥çœ‹æœ¬æœºä¸Šçš„æ‰€æœ‰é•œåƒ.</p>
<h3 id="ç”±é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨">ç”±é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨</h3>
<p>ä½¿ç”¨ <code>docker run</code> å‘½ä»¤ä¸º <code>IMAGE</code> åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨, å¹¶è¿è¡Œä¸€ä¸ª <code>[COMMAND] [ARG...]</code>, è¯¦è§ <a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-run-command.html">Docker run å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ä¸‹é¢çš„è¯­å¥ä½¿ç”¨ <code>docker run</code> å‘½ä»¤ä¸ºé•œåƒ <code>harbor.4pd.io/lab-platform/pk_platform/model_services/guohongjie_basemodel_russian_ability</code> åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨, å®¹å™¨çš„åå­—å«åš <code>mycontainer</code>.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --privileged=true --name mycontainer harbor.4pd.io/lab-platform/pk_platform/model_services/guohongjie_basemodel_russian_ability:0.0.4 /bin/bash</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜</p>
<ul>
<li><code>-i</code> å‚æ•°è¡¨ç¤ºä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨, <code>-t</code> å‚æ•°è¡¨ç¤ºä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯;</li>
<li>å½“ä½¿ç”¨<code>--privileged=true</code>é€‰é¡¹è¿è¡Œå®¹å™¨æ—¶, Dockerä¼šèµ‹äºˆå®¹å™¨å‡ ä¹ä¸ä¸»æœºç›¸åŒçš„æƒé™. å…·ä½“æ¥è¯´, è¿™ä¸ªé€‰é¡¹åšäº†ä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…: 1.ç»™å®¹å™¨æ·»åŠ äº†æ‰€æœ‰çš„ Capabilities; 2.å…è®¸å®¹å™¨è®¿é—®ä¸»æœºçš„æ‰€æœ‰è®¾å¤‡. è¿™æ„å‘³ç€åœ¨ä¸€ä¸ªprivileged=trueçš„å®¹å™¨ä¸­, æˆ‘ä»¬å¯ä»¥åšå¾ˆå¤šå¹³æ—¶ä¸èƒ½åšçš„äº‹æƒ…, ä¾‹å¦‚åŠ è½½å†…æ ¸æ¨¡å—ã€ç›´æ¥æ“ä½œç¡¬ä»¶è®¾å¤‡ç­‰;</li>
<li><code>/bin/bash</code> ä¸º linux ç»ˆç«¯çš„å‘½ä»¤, è¡¨ç¤ºåœ¨å®¹å™¨ä¸­é»˜è®¤å¯åŠ¨ä¸€ä¸ªbash. å…¶ä½œç”¨æ˜¯è½½å…¥å®¹å™¨åè¿è¡Œbash, dockerå®¹å™¨ä¸­å¿…é¡»è¦ä¿æŒä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œ, è¦ä¸ç„¶æ•´ä¸ªå®¹å™¨å¯åŠ¨åå°±ä¼šé©¬ä¸Šç»“æŸ(kill).</li>
<li>æ­¤å¤–å¯ä»¥é€šè¿‡æ·»åŠ  <code>-d</code> å‚æ•°ä¸ºå®¹å™¨æŒ‡å®šåå°è¿è¡Œ, å³åˆ›å»ºä¸€ä¸ªå®¹å™¨ä½†ä¸è¿›å…¥è¯¥å®¹å™¨, ç»ˆç«¯ä¾ç„¶å¤„åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸‹, å¹¶è¿”å›è¯¥å®¹å™¨çš„ Container Id.</li>
</ul>
<p>æ‰§è¡Œè¯¥å‘½ä»¤åä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨, å¹¶è¿›å…¥å®¹å™¨çš„ bash ç»ˆç«¯, ä»¥åŠcdè¿›å…¥é•œåƒé…ç½®æ–‡ä»¶ Dockerfile ä¸­æ‰€æŒ‡å®šçš„ WORKDIR. æ­¤æ—¶æˆ‘ä»¬å·²ç»åœ¨å®¹å™¨ä¸­äº† (å¦‚æœæ²¡æœ‰åŠ  <code>-d</code> å‚æ•°), å¯ä»¥æ‰§è¡Œä¸€äº›ç»ˆç«¯å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨çš„ä¿¡æ¯, ä¾‹å¦‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/os-release # æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬</span><br></pre></td></tr></table></figure>
<p>åœ¨å®¹å™¨ä¸­å¯ä»¥é€šè¿‡ <code>exit</code> å‘½ä»¤æ¥é€€å‡ºä¸€ä¸ªå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit # é€€å‡ºå½“å‰å®¹å™¨, å›åˆ°ä¸»æ“ä½œç³»ç»Ÿ</span><br></pre></td></tr></table></figure>
<h3 id="å¯¹å®¹å™¨çš„ç®€å•æ“ä½œ">å¯¹å®¹å™¨çš„ç®€å•æ“ä½œ</h3>
<p>åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸­å¯ä»¥é€šè¿‡ <a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-ps-command.html">Docker ps å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹</a> æ¥æŸ¥çœ‹å·²ç»åˆ›å»ºçš„å®¹å™¨, åˆ—å‡ºåŒ…æ‹¬å®¹å™¨çš„ CONTAINER ID, IMAGE, STATUS å’Œ NAMES ç­‰ä¿¡æ¯.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps    # åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps -a # åˆ—å‡ºæ‰€æœ‰å·²ç»åˆ›å»ºçš„å®¹å™¨ (åŒ…æ‹¬å…³é—­çš„å®¹å™¨)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ STATUS å®¹å™¨çŠ¶æ€åŒ…æ‹¬ <code>Created</code>(å·²åˆ›å»º), <code>Restarting</code>(é‡å¯ä¸­), <code>Running</code>/<code>Up</code>(è¿è¡Œä¸­), <code>Removing</code>(è¿ç§»ä¸­), <code>Paused</code>(æš‚åœ), <code>Exited</code>(åœæ­¢), <code>Dead</code>(æ­»äº¡). ä¾‹å¦‚ <code>Up 3 days</code> è¡¨ç¤ºè¿™ä¸ªå®¹å™¨å·²ç»äº†è¿ç»­è¿è¡Œ 3 å¤©äº†, <code>Exited 10 minutes ago</code> è¡¨ç¤ºè¿™ä¸ªå®¹å™¨åœ¨ 10 åˆ†é’Ÿä¹‹å‰é€€å‡º.</p>
<p>åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸­ (å®¹å™¨å¤–) é€šè¿‡ <code>start</code> å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªåœæ­¢è¿è¡Œçš„å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [CONTAINER ID]/[NAME] # å¯åŠ¨ä¸€ä¸ªå…³é—­çš„å®¹å™¨ (é»˜è®¤åå°è¿è¡Œ)</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æ·»åŠ å‚æ•° <code>-i</code> å°†ä»¥äº¤äº’æ¨¡å¼å¯åŠ¨å®¹å™¨, åœ¨ç»ˆç«¯ä¸­å¯¹å®¹å™¨è¿›è¡Œæ“ä½œ.</p>
<p>åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸­ (å®¹å™¨å¤–) é€šè¿‡å‘½ä»¤ <code>restart</code> å‘½ä»¤æ¥é‡å¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart [CONTAINER ID]/[NAME] # é‡å¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸­ (å®¹å™¨å¤–) é€šè¿‡å‘½ä»¤ <code>stop</code> å‘½ä»¤æ¥å…³é—­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [CONTAINER ID]/[NAME] # å…³é—­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ <a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-rm-command.html">Docker rm å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹</a> æ¥åˆ é™¤ä¸€ä¸ªå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f [CONTAINER ID]/[NAME]</span><br></pre></td></tr></table></figure>
<h3 id="æäº¤é•œåƒ">æäº¤é•œåƒ</h3>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-commit-command.html">Docker commit å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹</a></p>
<p>ä½¿ç”¨ <code>docker commit</code> å‘½ä»¤æ¥ä»å·²ç»ä¿®æ”¹å¥½çš„å®¹å™¨æäº¤ä¸€ä¸ªæ–°çš„é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">OPTIONSè¯´æ˜ï¼š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-a :æäº¤çš„é•œåƒä½œè€…ï¼›</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-c :ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒï¼›</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-m :æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼›</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-p :åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœã€‚</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-build-command.html">Docker build å‘½ä»¤ | èœé¸Ÿæ•™ç¨‹</a></p>
<h3 id="åœ¨å®¹å™¨ä¸­ä½¿ç”¨nvidiaæœºå™¨">åœ¨å®¹å™¨ä¸­ä½¿ç”¨nvidiaæœºå™¨</h3>
<p>å¦‚æœåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ä¸æŒ‡å®š <code>runtime=nvidia</code>, é‚£ä¹ˆåœ¨å®¹å™¨ä¸­é€šè¿‡ <code>vllm.entrypoints.openai.api_server</code> è¿è¡Œå¤§æ¨¡å‹æœåŠ¡æ—¶ä¼šæŠ¥é”™ <code>ImportError: /usr/lib/x86_64-linux-gnu/libcuda.so.1: file too short</code>. è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦å…ˆåœ¨ä¿éšœæœºä¸­å®‰è£… <code>nvidia-container-toolkit</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y nvidia-container-toolkit</span><br><span class="line">nvidia-ctk runtime configure --runtime=docker</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™æŒ‡å®š <code>--runtime=nvidia --gups all</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit --runtime=nvidia --gpus all --privileged=true --name mycontainer harbor.4pd.io/lab-platf</span><br><span class="line">orm/pk_platform/model_services/guohongjie_basemodel_russian_ability:0.0.4 /bin/bash</span><br></pre></td></tr></table></figure>
<p>ä¹‹ååœ¨å®¹å™¨ä¸­é‡æ–°å°è¯•è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m vllm.entrypoints.openai.api_server --model /root/Qwen2-7B-Instruct --served-model-name llm --trust-remote-code --port 10086 --api-key 123456</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨æŒ‚è½½å·">ä½¿ç”¨æŒ‚è½½å·</h3>
<p>å»ºè®®å®¹å™¨ä»…ä»…ä½œä¸ºä¸€ä¸ªä»£ç è¿è¡Œç¯å¢ƒ, ä¸è¦åœ¨å…¶ä¸­å­˜å‚¨ä»£ç å’Œæ•°æ®, å› ä¸ºæ•°æ®é›†å’Œæ¨¡å‹æƒé‡å¾€å¾€ä½“ç§¯åºå¤§, å°†å…¶å­˜åœ¨å®¹å™¨ä¸­ä¼šå¯¼è‡´æ­¤åæ‰€ build çš„é•œåƒä½“ç§¯è¶Šæ¥è¶Šå¤§. ä¸€ä¸ªæ¯”è¾ƒåˆé€‚çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†æ•°æ®é›†/æ¨¡å‹æƒé‡/ä»£ç å­˜æ”¾åœ¨ä¸»æœºç›®å½•ä¸­, åœ¨é€šè¿‡åŸºç¡€é•œåƒ (å…¶ä¸­åªåŒ…å«è¿è¡Œä»£ç æ‰€éœ€è¦çš„ç¯å¢ƒ) run å®¹å™¨æ—¶, é€šè¿‡ <code>--volume</code> å‚æ•°æ¥å°†ä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit \</span><br><span class="line">--volume /path/to/host_dir1:/path/to/container_dir1 \</span><br><span class="line">--volume /path/to/host_dir2:/path/to/container_dir2 \</span><br><span class="line">--privileged=true --runtime=nvidia --gpus all \</span><br><span class="line">--name NAME IMAGE_NAME:IMAGE_TAG /bin/bash</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•é€šè¿‡vscodeè¿æ¥dockerå®¹å™¨">å¦‚ä½•é€šè¿‡VSCodeè¿æ¥Dockerå®¹å™¨</h2>
<p>VSCodeæ˜¯å¯ä»¥åƒè¿æ¥æœåŠ¡å™¨ä¸€æ ·è¿æ¥Dockerå®¹å™¨çš„, é€šè¿‡Dev Containersæ’ä»¶å¯ä»¥éå¸¸æ–¹ä¾¿çš„ä»æœ¬åœ°è¿æ¥è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„å®¹å™¨, ä»è€Œå¤§å¤§ç®€åŒ–å¯¹å®¹å™¨ä¸­ä»£ç çš„ä¿®æ”¹å’Œè°ƒè¯•è¿‡ç¨‹.</p>
<h3 id="å®‰è£…-remote-ssh-æ’ä»¶">å®‰è£… Remote-SSH æ’ä»¶</h3>
<p>é¦–å…ˆéœ€è¦åœ¨ MacOS ä¸Šå®‰è£… VSCode ä»¥åŠå®‰è£… Remote-SSH æ’ä»¶, ç„¶ååœ¨ ssh config ä¸­æ·»åŠ ä¿éšœæœºçš„é…ç½®ä¿¡æ¯, ä¾‹å¦‚æˆ‘çš„ä¿éšœæœºçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host myserver</span><br><span class="line">    User zhangwenxiang@root@172.xx.x.xxx</span><br><span class="line">    HostNmae system-jumpserver.4paradigm.com</span><br><span class="line">    Port 10022</span><br><span class="line">    PubkeyAcceptedKeyTypes +ssh-rsa</span><br><span class="line">    HostKeyAlgorithms +ssh-rsa</span><br></pre></td></tr></table></figure>
<p>ä¹‹åé€šè¿‡ Remote-SSH è¿æ¥ä¿éšœæœº. æ³¨æ„è¿™é‡Œæˆ‘æå‰é…ç½®äº†ä»£ç†, æ‰€ä»¥æˆ‘çš„ä¿éšœæœºå¯ä»¥è®¿é—®å…¬å¸å¤–ç½‘, æ‰€ä»¥åœ¨SSHè¿æ¥è¿‡ç¨‹ä¸­, æˆ‘çš„ä¿éšœæœºèƒ½å¤Ÿé€šè¿‡ç½‘ç»œç›´æ¥ä¸‹è½½ vscode-server. å¦‚æœä½ çš„ä¿éšœæœºæ²¡æœ‰é…ç½®ä»£ç†, å¯ä»¥å°è¯•æŒ‰ç…§å‰æ–‡æåˆ°çš„æ–¹å¼é…ç½®ä»£ç†, æˆ–è€…åœ¨ä¿éšœæœºä¸Šä»æœ¬åœ°ç¦»çº¿å®‰è£… vscoder-server.</p>
<h3 id="å®‰è£…-dev-container-æ’ä»¶">å®‰è£… Dev Container æ’ä»¶</h3>
<p>åœ¨ä¿éšœæœºä¸Šå®‰è£… Dev Container æ’ä»¶, æ–¹æ³•åŒ Remote-SSH. å®‰è£…å®Œæˆååœ¨ VSCode çš„å·¦ä¾§æ ä¸­ä¼šå‡ºç°ä¸€ä¸ª Remote Explorer å›¾æ ‡ (å’ŒRemote-SSHåŒä¸€ä¸ªå›¾æ ‡), å…¶é¡¶éƒ¨èœå•å¯ä»¥åœ¨ Remotes(Tunnels/SSH) å’Œ Dev Containers ä¸¤è€…é—´åˆ‡æ¢.</p>
<h3 id="è¿æ¥è¿è¡Œä¸­çš„å®¹å™¨">è¿æ¥è¿è¡Œä¸­çš„å®¹å™¨</h3>
<p>é¦–å…ˆéœ€è¦æœ¬åœ° VSCode è¿æ¥ä¿éšœæœº, ä¹‹åå¯ä»¥åœ¨å·¦ä¾§æ çš„ Remote Explorer &gt; Dev Container ä¸­æŸ¥çœ‹åˆ°ä¿éšœæœºä¸Šåˆ›å»ºçš„å®¹å™¨, é€‰æ‹©ç›®æ ‡å®¹å™¨è¿›è¡Œè¿æ¥. ä¹‹åçš„æ“ä½œå’Œåœ¨æœ¬åœ°ç±»ä¼¼.</p>
<blockquote>
<p>å¤‡æ³¨: æœ‰äº›ç¥å¥‡çš„æ˜¯åœ¨æŒ‚äº†ä»£ç†çš„ä¿éšœæœºä¸Šç›´æ¥é€šè¿‡ç½‘ç»œå®‰è£… VSCode æ’ä»¶ä¸è¡Œ, ä½†æ˜¯å¯¹äºè¿è¡Œåœ¨ä¿éšœæœºä¸Šçš„å®¹å™¨å´å¯ä»¥ç›´æ¥å®‰è£… VSCode æ’ä»¶. åªåœ¨åœ¨ä¿éšœæœºä¸Šé€šè¿‡ä»£ç†ç½‘ç»œä¸‹è½½ VSCode æ’ä»¶è¿˜æ˜¯ä¸€ä¸ªå¸¦è§£å†³çš„é—®é¢˜.</p>
</blockquote>
<h2 id="å¦‚ä½•åœ¨å®¹å™¨ä¸­å¯¹ä»£ç è¿›è¡Œè°ƒè¯•">å¦‚ä½•åœ¨å®¹å™¨ä¸­å¯¹ä»£ç è¿›è¡Œè°ƒè¯•</h2>
<p>é€šè¿‡ VSCode è¿æ¥å®¹å™¨å, å°±å¯ä»¥åƒåœ¨æœ¬åœ°ä¸€æ ·æ“ä½œå®¹å™¨ä¸­çš„å†…å®¹. æ¯”å¦‚ä¿®æ”¹ä»£ç å’Œè°ƒè¯•ä»£ç , ä¸‹é¢ç®€å•ä»‹ç»å¦‚ä½•å¯¹ Python ä»£ç è¿›è¡Œè°ƒè¯•, æ›´è¯¦ç»†çš„ä¿¡æ¯è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/python/debugging">Python debugging in VS Code | VSCode Docs</a>.</p>
<p>é¦–å…ˆéœ€è¦åœ¨å®¹å™¨ä¸­å®‰è£… Python ä¸‰ä¸ª VSCode æ’ä»¶</p>
<ul>
<li>Python</li>
<li>Pylance</li>
<li>Python Debugger</li>
</ul>
<p>ç„¶ååœ¨å·¦ä¾§æ çš„ Run and Debug æ ä¸­ç‚¹å‡» create a launch.json file, VSCode ä¼šè‡ªåŠ¨åœ¨ä½ å½“å‰ workspaceFolder çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.vscode</code> æ–‡ä»¶å¤¹, å…¶ä¸­åŒ…å«ä¸€ä¸ª <code>launch.json</code> æ–‡ä»¶. æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ª <code>launch.json</code> æ–‡ä»¶ä¸­å†™å…¥å…³äº Python è°ƒè¯•çš„é…ç½®ä¿¡æ¯. ä¾‹å¦‚æˆ‘çš„é…ç½®å¦‚ä¸‹</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;config1: startup&quot;</span><span class="punctuation">,</span> <span class="comment">// é…ç½®åç§°</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;debugpy&quot;</span><span class="punctuation">,</span>          <span class="comment">// è°ƒè¯•å™¨çš„ç±»å‹, æŒ‡å®šPythonè°ƒè¯•</span></span><br><span class="line">      <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/startup.py&quot;</span><span class="punctuation">,</span> <span class="comment">// è°ƒè¯•çš„å…¥å£, è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„</span></span><br><span class="line">      <span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integratedTerminal&quot;</span><span class="punctuation">,</span> <span class="comment">// åœ¨VSCodeå†…ç½®ç»ˆç«¯ä¸­è¾“å‡º</span></span><br><span class="line">      <span class="attr">&quot;justMyCode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// æ˜¯å¦åªè°ƒè¯•è‡ªå·±çš„ä»£ç , é€‰æ‹©falseåˆ™ä¼šè¿åŒæ‰€importåº“çš„ä»£ç ä¸€èµ·è°ƒè¯•</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ Run and Debug æ çš„é¡¶éƒ¨å¯ä»¥é€‰æ‹©å¯¹åº”çš„é…ç½®, ç‚¹å‡» Start Debugging (F5) è¿›å…¥è°ƒè¯•æ¨¡å¼.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://whut-zhangwx.github.io">æ–‡ç¾Šç¾½</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://whut-zhangwx.github.io/how-to-configure-remote-development-environment-on-vscode/">https://whut-zhangwx.github.io/how-to-configure-remote-development-environment-on-vscode/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://whut-zhangwx.github.io" target="_blank">æ–‡ç¾Šç¾½</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/">è®¡ç®—æœº</a><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/VSCode/">VSCode</a><a class="post-meta__tags" href="/tags/Remote-SSH/">Remote-SSH</a><a class="post-meta__tags" href="/tags/Dev-Containers/">Dev Containers</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%A6%82%E4%BD%95%E8%AE%A9%E4%BF%9D%E9%9A%9C%E6%9C%BA%E8%BF%9E%E5%85%AC%E5%8F%B8%E5%A4%96%E7%BD%91%E4%B8%8B%E8%BD%BD-vscode-%E6%8F%92%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">å…³äºå¦‚ä½•è®©ä¿éšœæœºè¿å…¬å¸å¤–ç½‘ä¸‹è½½ VsCode æ’ä»¶çš„æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E4%BF%9D%E9%9A%9C%E6%9C%BA%E4%B8%8A%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85vscode%E6%8F%92%E4%BB%B6"><span class="toc-text">å¦‚ä½•åœ¨ä¿éšœæœºä¸Šç¦»çº¿å®‰è£…VSCodeæ’ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85-vscode-server"><span class="toc-text">å¦‚ä½•ç¦»çº¿å®‰è£… vscode-server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-text">Dockerçš„ç®€å•ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83"><span class="toc-text">é…ç½®Dockerç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E8%BF%9C%E7%AB%AF%E6%8B%89%E5%8F%96docker%E9%95%9C%E5%83%8F"><span class="toc-text">ä»è¿œç«¯æ‹‰å–Dockeré•œåƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B1%E9%95%9C%E5%83%8F%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8"><span class="toc-text">ç”±é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%AE%B9%E5%99%A8%E7%9A%84%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C"><span class="toc-text">å¯¹å®¹å™¨çš„ç®€å•æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E9%95%9C%E5%83%8F"><span class="toc-text">æäº¤é•œåƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E4%BD%BF%E7%94%A8nvidia%E6%9C%BA%E5%99%A8"><span class="toc-text">åœ¨å®¹å™¨ä¸­ä½¿ç”¨nvidiaæœºå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8C%82%E8%BD%BD%E5%8D%B7"><span class="toc-text">ä½¿ç”¨æŒ‚è½½å·</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87vscode%E8%BF%9E%E6%8E%A5docker%E5%AE%B9%E5%99%A8"><span class="toc-text">å¦‚ä½•é€šè¿‡VSCodeè¿æ¥Dockerå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-remote-ssh-%E6%8F%92%E4%BB%B6"><span class="toc-text">å®‰è£… Remote-SSH æ’ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-dev-container-%E6%8F%92%E4%BB%B6"><span class="toc-text">å®‰è£… Dev Container æ’ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%B8%AD%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-text">è¿æ¥è¿è¡Œä¸­çš„å®¹å™¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E5%AF%B9%E4%BB%A3%E7%A0%81%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95"><span class="toc-text">å¦‚ä½•åœ¨å®¹å™¨ä¸­å¯¹ä»£ç è¿›è¡Œè°ƒè¯•</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By æ–‡ç¾Šç¾½</div><div class="footer_custom_text">Hi, welcome to my <a href="https://whut-zhangwx.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'default' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>